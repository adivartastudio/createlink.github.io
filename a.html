<section class="undangan-generator">
  <h2 class="judul">Buat Link Undangan</h2>

  <label for="namaTamu" class="label">Tuliskan Nama Tamu</label>
  <input type="text" id="namaTamu" placeholder="Contoh: Bapak Ahmad" />

  <label class="label">Pilih Template Pesan</label>
  <div class="template-list">
    <div class="template-item">
      <label>
        <input type="radio" name="template" value="1" checked />
        Template 1
      </label>
      <button class="toggle-btn" data-target="preview1">Lihat Template</button>
      <div class="template-preview" id="preview1"></div>
    </div>

    <div class="template-item">
      <label>
        <input type="radio" name="template" value="2" />
        Template 2
      </label>
      <button class="toggle-btn" data-target="preview2">Lihat Template</button>
      <div class="template-preview" id="preview2"></div>
    </div>

    <div class="template-item">
      <label>
        <input type="radio" name="template" value="3" />
        Template 3
      </label>
      <button class="toggle-btn" data-target="preview3">Lihat Template</button>
      <div class="template-preview" id="preview3"></div>
    </div>
  </div>

  <div class="action-buttons">
    <button id="buatUndanganBtn">Buat Undangan</button>
    <button id="resetBtn" class="reset">Reset</button>
  </div>

  <div class="hasil" id="hasilContainer">
    <h3>Hasil Pesan:</h3>
    <textarea id="hasilPesan" readonly></textarea>
    <div class="button-group">
      <button id="salinBtn">Salin Pesan</button>
      <a id="waBtn" href="#" target="_blank">Kirim ke WhatsApp</a>
    </div>
  </div>
</section>

<script>
  const templates = {
    1: `Kepada Yth.  
Bapak/Ibu/Saudara/i (namatamu)

Tanpa mengurangi rasa hormat, perkenankan kami mengundang Bapak/Ibu/Saudara/i, teman sekaligus sahabat, untuk menghadiri acara pernikahan kami.

Berikut link undangan digital kami, yang memuat informasi lengkap mengenai waktu dan tempat acara:
ðŸ“Ž (link)

Merupakan suatu kebahagiaan bagi kami apabila Bapak/Ibu/Saudara/i berkenan untuk hadir dan memberikan doa restu di hari bahagia kami.

Mohon maaf apabila undangan ini hanya dapat kami sampaikan melalui pesan ini.  
Semoga kita semua diberikan kesehatan dan kelapangan waktu untuk dapat bertemu di hari istimewa tersebut.

Terima kasih atas perhatian dan pengertiannya. ðŸ™`,

    2: `Kepada Yth.  
(namatamu)

Dengan penuh kebahagiaan, kami mengundang Bapak/Ibu/Saudara/i untuk hadir dan menjadi bagian dari momen berharga dalam hidup kami, yaitu hari pernikahan kami.

Untuk informasi lengkap, silakan buka undangan digital kami melalui tautan berikut:
ðŸ“Ž (link)

Kami akan sangat berbahagia jika Bapak/Ibu/Saudara/i berkenan hadir dan turut memberikan doa serta restu.

Mohon maaf apabila undangan ini hanya kami sampaikan melalui pesan singkat ini.  
Semoga kita dapat bertemu dan berbagi kebahagiaan bersama pada hari yang telah ditentukan.

Terima kasih banyak atas perhatian dan waktu yang diluangkan. ðŸŒ¸`,

    3: `Kepada Yth.  
Bapak/Ibu/Saudara/i (namatamu)

Dengan ini kami bermaksud mengundang Bapak/Ibu/Saudara/i untuk menghadiri acara pernikahan kami, yang akan dilangsungkan pada waktu dan tempat yang tertera dalam undangan digital berikut:
ðŸ“Ž (link)

Kehadiran dan doa restu dari Bapak/Ibu/Saudara/i akan menjadi kebahagiaan tersendiri bagi kami.

Kami mohon maaf sebesar-besarnya apabila undangan ini hanya kami kirimkan melalui pesan ini, dan berharap dapat tetap menjaga kehangatan silaturahmi.

Terima kasih atas perhatian dan pengertiannya. ðŸ™`
  };

  window.onload = () => {
    for (let i = 1; i <= 3; i++) {
      document.getElementById(`preview${i}`).innerText = templates[i]
        .replaceAll("(namatamu)", "[nama tamu]")
        .replaceAll("(link)", "[link undangan]");
      document.getElementById(`preview${i}`).style.display = "none";
    }

    document.getElementById("hasilContainer").style.display = "none";
  };

  document.querySelectorAll('.toggle-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const target = document.getElementById(btn.dataset.target);
      const visible = target.style.display === 'block';
      target.style.display = visible ? 'none' : 'block';
      target.classList.toggle("fade-in", !visible);
      btn.textContent = visible ? 'Lihat Template' : 'Sembunyikan Template';
    });
  });

  document.getElementById("buatUndanganBtn").addEventListener("click", () => {
    const nama = document.getElementById("namaTamu").value.trim();
    const templateVal = document.querySelector('input[name="template"]:checked')?.value;
    const linkDasar = "https://diaryinvitation.com/Inivitation/partika-ayu";
    const link = `${linkDasar}?nama=${encodeURIComponent(nama)}`;

    if (!nama) {
      alert("Tolong isi nama tamu terlebih dahulu.");
      return;
    }

    let teks = templates[templateVal];
    teks = teks.replaceAll("(namatamu)", nama).replaceAll("(link)", link);

    document.getElementById("hasilPesan").value = teks;
    document.getElementById("waBtn").href = `https://wa.me/?text=${encodeURIComponent(teks)}`;
    document.getElementById("hasilContainer").style.display = "block";
    document.getElementById("hasilContainer").classList.add("fade-in");
  });

  document.getElementById("salinBtn").addEventListener("click", () => {
    const textarea = document.getElementById("hasilPesan");
    textarea.select();
    document.execCommand("copy");
    alert("Pesan berhasil disalin!");
  });

  document.getElementById("resetBtn").addEventListener("click", () => {
    document.getElementById("namaTamu").value = "";
    document.querySelector('input[name="template"][value="1"]').checked = true;
    document.getElementById("hasilPesan").value = "";
    document.getElementById("hasilContainer").style.display = "none";

    document.querySelectorAll(".template-preview").forEach(el => {
      el.style.display = "none";
    });

    document.querySelectorAll(".toggle-btn").forEach(btn => {
      btn.textContent = "Lihat Template";
    });
  });
</script>

<!-- Link ke file CSS -->
<link rel="stylesheet" href="a.css" />
